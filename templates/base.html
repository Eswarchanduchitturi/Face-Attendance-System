<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Face Attendance System</title>

    <!-- Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            background: #f7f7f8;
        }
    </style>
</head>

<body>

<div class="app-layout">

    <!-- ================= SIDEBAR ================= -->
    <div class="sidebar">

        <!-- LOGO -->
        <div class="sidebar-header text-center">
            <div class="logo-text">
                FAS
            </div>
        </div>

        <!-- MAIN NAVIGATION -->
        <div class="sidebar-links">

            <!-- LIVE FOLDER -->
            <div class="sidebar-folder">

                <div class="side-link folder-toggle"
                     onclick="toggleLiveFolder()">
                    <i class="fa-solid fa-folder-open"></i>
                    <span>Live</span>
                    <i id="liveChevron"
                       class="fa-solid fa-chevron-down ms-auto small"></i>
                </div>

                <div id="liveSubmenu" class="submenu">

                    <a href="/"
                       class="side-sublink"
                       onclick="setMode('checkin')">
                        ðŸ“„ Check-In Session
                    </a>

                    <a href="/"
                       class="side-sublink"
                       onclick="setMode('checkout')">
                        ðŸ“„ Check-Out Session
                    </a>

                </div>

            </div>

            <a href="/enroll" class="side-link">
                <i class="fa-solid fa-user-plus"></i>
                <span>Enroll</span>
            </a>

            <a href="/attendance" class="side-link">
                <i class="fa-solid fa-calendar-check"></i>
                <span>Attendance</span>
            </a>

            <a href="/support" class="side-link">
                <i class="fa-solid fa-comments"></i>
                <span>Support Center</span>
            </a>

        </div>

        <!-- FOOTER NAVIGATION -->
        <div class="sidebar-footer">

            <!-- AI ASSISTANT -->
            <a href="/copilot" class="side-link">
                <i class="fa-solid fa-robot"></i>
                <span>FAS Copilot</span>
            </a>

            <!-- ADMIN -->
            <a href="/login" class="side-link">
                <i class="fa-solid fa-user-shield"></i>
                <span>Admin</span>
            </a>

        </div>

    </div>

    <!-- ================= MAIN PANEL ================= -->
    <div class="main-panel">

        <div class="topbar">
            <span class="topbar-title">Dashboard</span>
        </div>

        <div class="content-area">
            {% block content %}{% endblock %}
        </div>

    </div>

</div>

<!-- ================= CENTER MESSAGE CARD ================= -->
<div id="centerMessage" class="center-message d-none">
    <div class="message-card">
        <div id="messageText"></div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>

/* ================= LIVE FOLDER TOGGLE ================= */
function toggleLiveFolder(){
    const menu = document.getElementById("liveSubmenu");
    const icon = document.getElementById("liveChevron");

    menu.classList.toggle("show-submenu");

    if(menu.classList.contains("show-submenu")){
        icon.style.transform = "rotate(180deg)";
    } else {
        icon.style.transform = "rotate(0deg)";
    }
}

/* ================= SET MODE ================= */
async function setMode(mode){
    await fetch(`/set_mode/${mode}`);
    showCenterMessage("Mode changed to " + mode.toUpperCase());
}

/* ================= CENTER MESSAGE ================= */
function showCenterMessage(msg, success=true){

    const box = document.getElementById("centerMessage");
    const text = document.getElementById("messageText");

    text.innerText = msg;

    if(success){
        text.style.color = "#0071E3";
    } else {
        text.style.color = "#d11a2a";
    }

    box.classList.remove("d-none");

    setTimeout(()=>{
        box.classList.add("d-none");
    }, 3000);
}

</script>
<!-- TOP RIGHT POPUP -->
<div id="topToast" class="top-toast d-none">
    <span id="topToastText"></span>
</div>
<script>
function showTopToast(message){

    const toast = document.getElementById("topToast");
    const text = document.getElementById("topToastText");

    text.innerText = message;

    toast.classList.remove("d-none");
    toast.classList.add("show-toast");

    setTimeout(() => {
        toast.classList.remove("show-toast");
        setTimeout(() => {
            toast.classList.add("d-none");
        }, 300);
    }, 3000);
}
</script>


</body>
</html>
